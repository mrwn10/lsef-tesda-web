<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - TESDA LSEF</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/forgot_password.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/lsef_logo.png') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="password-reset-wrapper">
        <div class="password-reset-container">
            <div class="password-reset-header">
                <div class="logo-container">
                    <img src="{{ url_for('static', filename='img/lsef_logo.png') }}" alt="LSEF Logo" class="logo">
                    <img src="{{ url_for('static', filename='img/tesda_logo.png') }}" alt="TESDA Logo" class="logo">
                </div>
                <h1>Reset Your Password</h1>
                <p class="subtitle">Enter your email to receive a verification code</p>
            </div>
            
            <!-- Progress Indicator -->
            <div class="progress-indicator">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <span class="step-label">Email</span>
                </div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <span class="step-label">Verify</span>
                </div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <span class="step-label">Password</span>
                </div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">4</div>
                    <span class="step-label">Done</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
            
            <!-- Step 1: Email Input -->
            <div class="step active" id="step1">
                <form id="emailForm" class="password-reset-form">
                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <div class="input-wrapper">
                            <input type="email" id="email" placeholder="Enter your registered email" required>
                            <i class="fas fa-envelope input-icon"></i>
                        </div>
                        <div class="error-message" id="email-error">
                            <i class="fas fa-exclamation-circle"></i>
                            <span class="error-text"></span>
                        </div>
                    </div>
                    <button type="submit" id="send-otp-btn" class="submit-btn">
                        <span class="btn-text">Send Verification Code</span>
                        <span class="btn-loader">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                    <div class="auth-link">
                        <a href="{{ url_for('login') }}"><i class="fas fa-arrow-left"></i> Back to Login</a>
                    </div>
                </form>
            </div>
            
            <!-- Step 2: OTP Verification -->
            <div class="step" id="step2">
                <form id="otpForm" class="password-reset-form">
                    <div class="verification-notice">
                        <i class="fas fa-envelope-open-text"></i>
                        <div>
                            <p class="verification-title">Check your email</p>
                            <p>We've sent a 6-digit verification code to <strong id="email-display"></strong></p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="otp">
                            <i class="fas fa-shield-alt"></i> Verification Code
                        </label>
                        <div class="otp-container">
                            <input type="text" class="otp-input" maxlength="1" data-index="1" inputmode="numeric" pattern="[0-9]*" required>
                            <input type="text" class="otp-input" maxlength="1" data-index="2" inputmode="numeric" pattern="[0-9]*" required>
                            <input type="text" class="otp-input" maxlength="1" data-index="3" inputmode="numeric" pattern="[0-9]*" required>
                            <input type="text" class="otp-input" maxlength="1" data-index="4" inputmode="numeric" pattern="[0-9]*" required>
                            <input type="text" class="otp-input" maxlength="1" data-index="5" inputmode="numeric" pattern="[0-9]*" required>
                            <input type="text" class="otp-input" maxlength="1" data-index="6" inputmode="numeric" pattern="[0-9]*" required>
                        </div>
                        <input type="hidden" id="otp">
                        <div class="error-message" id="otp-error">
                            <i class="fas fa-exclamation-circle"></i>
                            <span class="error-text"></span>
                        </div>
                        <div class="success-message" id="otp-success">
                            <i class="fas fa-check-circle"></i>
                            <span class="success-text"></span>
                        </div>
                        <div id="resend-container">
                            <span class="resend-otp" id="resend-otp">
                                <i class="fas fa-redo"></i> Resend Code
                            </span>
                            <span id="countdown">(1:00)</span>
                        </div>
                    </div>
                    <button type="submit" id="verify-otp-btn" class="submit-btn">
                        <span class="btn-text">Verify Code</span>
                        <span class="btn-loader">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                    <button type="button" id="back-to-email-btn" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Back to Email
                    </button>
                </form>
            </div>
            
            <!-- Step 3: New Password -->
            <div class="step" id="step3">
                <form id="passwordForm" class="password-reset-form">
                    <div class="form-group">
                        <label for="new-password">
                            <i class="fas fa-lock"></i> New Password
                        </label>
                        <div class="input-wrapper">
                            <input type="password" id="new-password" placeholder="Enter new password" required>
                            <i class="fas fa-lock input-icon"></i>
                            <button type="button" class="toggle-password" aria-label="Show password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength">
                            <div class="password-strength-meter">
                                <div class="strength-fill" id="strength-fill"></div>
                            </div>
                            <div class="password-rules">
                                <p class="rules-title">Password must contain:</p>
                                <ul>
                                    <li id="pw-length"><i class="fas fa-circle"></i> At least 8 characters</li>
                                    <li id="pw-upper"><i class="fas fa-circle"></i> One uppercase letter</li>
                                    <li id="pw-lower"><i class="fas fa-circle"></i> One lowercase letter</li>
                                    <li id="pw-number"><i class="fas fa-circle"></i> One number</li>
                                    <li id="pw-special"><i class="fas fa-circle"></i> One special character</li>
                                </ul>
                            </div>
                        </div>
                        <div class="error-message" id="password-error">
                            <i class="fas fa-exclamation-circle"></i>
                            <span class="error-text"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirm-password">
                            <i class="fas fa-lock"></i> Confirm Password
                        </label>
                        <div class="input-wrapper">
                            <input type="password" id="confirm-password" placeholder="Confirm new password" required>
                            <i class="fas fa-lock input-icon"></i>
                            <button type="button" class="toggle-password" aria-label="Show password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="confirm-error">
                            <i class="fas fa-exclamation-circle"></i>
                            <span class="error-text"></span>
                        </div>
                    </div>
                    
                    <button type="submit" id="reset-password-btn" class="submit-btn">
                        <span class="btn-text">Reset Password</span>
                        <span class="btn-loader">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                    </button>
                    <button type="button" id="back-to-otp-btn" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Back to Verification
                    </button>
                </form>
            </div>
            
            <!-- Step 4: Success Message -->
            <div class="step" id="step4">
                <div class="success-content">
                    <div class="success-animation">
                        <div class="success-checkmark">
                            <div class="check-icon">
                                <span class="icon-line line-tip"></span>
                                <span class="icon-line line-long"></span>
                                <div class="icon-circle"></div>
                                <div class="icon-fix"></div>
                            </div>
                        </div>
                    </div>
                    <h2>Password Reset Successful!</h2>
                    <p class="success-message">Your password has been successfully updated. You can now login with your new password.</p>
                    <div class="success-actions">
                        <a href="{{ url_for('login') }}" class="success-btn">
                            <i class="fas fa-sign-in-alt"></i> Back to Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="password-reset-footer">
            <p>© 2025 TESDA LSEF. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <span>•</span>
                <a href="#">Terms of Service</a>
                <span>•</span>
                <a href="#">Contact Support</a>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/forgot_password.js') }}"></script>
</body>
</html>